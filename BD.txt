CREATE DATABASE "Miniatures_store";

CREATE TABLE public."Clients"
(
    customer_id integer NOT NULL,
    name text NOT NULL,
    contact text,
    PRIMARY KEY (customer_id)
);

CREATE TABLE public."Artist"
(
    "artist_ID" integer NOT NULL,
    name text NOT NULL,
    contact text,
    PRIMARY KEY ("artist_ID")
);

CREATE TABLE public."Orders"
(
    "order_ID" integer NOT NULL,
    "customer_ID" integer,
    status_id integer,
    order_date date,
    completion_date date,
    description text,
    PRIMARY KEY ("order_ID"),
    CONSTRAINT "Client" FOREIGN KEY ("customer_ID")
        REFERENCES public."Clients" (customer_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID,
    CONSTRAINT "Status" FOREIGN KEY (status_id)
        REFERENCES public."Status" (status_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
);

CREATE TABLE public."Miniatures"
(
    "miniature_ID" integer NOT NULL,
    name text,
    kategory_id integer,
    material_id integer,
    photos_id integer,
    artist_id integer,
    PRIMARY KEY ("miniature_ID"),
    CONSTRAINT "Kategory" FOREIGN KEY (kategory_id)
        REFERENCES public."Kategory" (kategory_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID,
    CONSTRAINT "Material" FOREIGN KEY (material_id)
        REFERENCES public."Material" (material_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID,
    CONSTRAINT "Photos" FOREIGN KEY (photos_id)
        REFERENCES public."Photos" ("photos_ID") MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID,
    CONSTRAINT "Artist" FOREIGN KEY (artist_id)
        REFERENCES public."Artist" ("artist_ID") MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
);

CREATE TABLE public."Orders_row"
(
    "order_ID" integer NOT NULL,
    string_id integer NOT NULL,
    "artist_ID" integer,
    status_id integer,
    order_date date,
    completion_date date,
    description text,
    amount numeric,
    PRIMARY KEY ("order_ID", string_id),
    CONSTRAINT "Order" FOREIGN KEY ("order_ID")
        REFERENCES public."Orders" ("order_ID") MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID,
    CONSTRAINT "Artist" FOREIGN KEY ("artist_ID")
        REFERENCES public."Artist" ("artist_ID") MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID,
    CONSTRAINT "Status" FOREIGN KEY (status_id)
        REFERENCES public."Status" (status_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
);

CREATE TABLE public."Photos"
(
    "photos_ID" integer NOT NULL,
    string_photo_id integer NOT NULL,
    "URL" text,
    PRIMARY KEY ("photos_ID", string_photo_id)
);

CREATE TABLE public."Kategory"
(
    kategory_id integer NOT NULL,
    kategory text,
    PRIMARY KEY (kategory_id)
);

CREATE TABLE public."Material"
(
    material_id integer NOT NULL,
    material text,
    PRIMARY KEY (material_id)
);

CREATE TABLE public."Status"
(
    status_id integer NOT NULL,
    status text,
    PRIMARY KEY (status_id)
);

